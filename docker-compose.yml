# docker-compose.yml
# Michael Cole
# 
# -Development- Docker Compose file
# Run with `docker-compose up -d --build`
# ----------------------------------

version: '3'

services:

  flask:
    container_name: app
    build: 
      context: ./prosperwooddesigns
      dockerfile: app.dockerfile
    ports:
      - "5000:5000"
    volumes:
      - "./prosperwooddesigns:/prosperwooddesigns"
    env_file:
      - ./prosperwooddesigns.env
      - ./prosperwooddesigns.secrets.env
    environment:
      - FLASK_ENV=development
    depends_on: 
      - postgres

  postgres:
    container_name: db
    image: postgres:10.4-alpine
    env_file:
      - ./prosperwooddesigns.env
      - ./prosperwooddesigns.secrets.env
    volumes:
      - data_dev:/var/lib/postgresql/data/

volumes:
  data_dev:
